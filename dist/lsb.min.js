!function(t){"use strict";t.fn.lightspeedBox=function(e){function p(t){"undefined"!=typeof t&&(t.stopPropagation(),a.autoPlayback=!1),m.images.length>1?k(m.nextImage()):y()}function w(){b=!1,r.text(""),s.addClass("lsb-active")}function y(){s.removeClass("lsb-active"),o.removeClass("lsb-image-loaded"),o.addClass("lsb-noimage"),b=!0}function x(){a.autoPlayback&&p(),a.autoPlayback&&!b&&window.setTimeout(x,a.playbackTiming)}function k(t){o.addClass("lsb-noimage"),o.removeClass("lsb-image-loaded"),l.addClass("lsb-image-notitle"),c.hide(),window.setTimeout(function(){P(t)},v)}function P(e){n.show(),r.text(a.showImageCount&&m.images.length>1?m.current+1+"/"+m.images.length:"");var i=t("<img />").attr("src",e.href).on("load",function(){o.attr("src",i.attr("src")),a.showImageTitle&&l.text(e.alt),h.attr("href",e.href),I()}).on("error",function(t){n.hide(),l.text(e.alt),c.show(),console.log("[LSB Error]:",t)})}function I(){n.hide(),o.removeClass("lsb-noimage"),o.addClass("lsb-image-loaded"),l.removeClass("lsb-image-notitle")}var s,n,o,l,r,c,u,g,d,h,f,i={showImageTitle:!0,showImageCount:!0,showDownloadButton:!0,showAutoPlayButton:!0,autoPlayback:!1,playbackTiming:3500,zIndex:30,locale:{nextButton:"Next image",prevButton:"Previous image",closeButton:"Close",downloadButton:"Download image",noImageFound:"Sorry, no image found.",autoplayButton:"Enable autoplay"}},a=t.extend(i,e),v=400,b=!0,m={current:null,images:[],getImagesInSet:function(e){var i,s=[],n=0,o=e.attr("href"),l=e.find("img").attr("alt"),r=e.attr("data-lsb-group");r?(i=t('.lsb-preview[data-lsb-group="'+r+'"]'),i.each(function(e,i){var a=i.getAttribute("href"),l=t(i).find("img").attr("alt");s.push({href:a,alt:l}),a===o&&(n=e)})):s.push({href:o,alt:l}),this.images=s,this.current=n,1===this.images.length?(g.css("visibility","hidden"),u.css("visibility","hidden"),f.hide()):(g.css("visibility","visible"),u.css("visibility","visible"),a.showAutoPlayButton&&f.show())},nextImage:function(){return 0===this.images.length?"":(this.current+=1,this.current>this.images.length-1&&(this.current=0),this.images[this.current])},previousImage:function(){return 0===this.images.length?"":(this.current-=1,this.current<0&&(this.current=this.images.length-1),this.images[this.current])},canSwitch:function(){return this.images.length>1}};!function(){for(var e="",i=0;12>i;i++)e+='<div class="waitingicon-circle"></div>';t("body").append('<div class="lightspeed-box"><div class="lsb-content"><header class="lsb-header"><div class="lsb-image-count"></div><div class="lsb-image-title"></div></header><div class="lsb-control-panel"><a class="lsb-control lsb-panel-button lsb-autoplay" title="Slideshow">►</a><a class="lsb-control lsb-panel-button lsb-download" download title="Download Image">&#8681;</a></div><div class="lsb-image-container"><div class="lsb-no-image-found"><div class="no-found-msg">Sorry, no image found.</div></div><img class="lsb-image lsb-noimage"></div><div class="waitingicon">'+e+'</div><div class="lsb-control lsb-close"><span class="lsb-control-text" title="Close the image">&#x2716;</span></div><div class="lsb-control lsb-prev"><span class="lsb-control-text" title="Next image">&lt;</span></div><div class="lsb-control lsb-next"><span class="lsb-control-text" title="Previous image">&gt;</span></div></div></div>'),s=t(".lightspeed-box"),s.css("z-index",a.zIndex),n=t(".waitingicon"),o=s.find(".lsb-image"),l=s.find(".lsb-image-title"),r=s.find(".lsb-image-count"),c=s.find(".lsb-no-image-found"),u=s.find(".lsb-next"),g=s.find(".lsb-prev"),d=s.find(".lsb-close"),h=s.find(".lsb-download"),f=s.find(".lsb-autoplay"),a.showDownloadButton||h.hide(),a.showAutoPlayButton||f.hide(),u.attr("title",a.locale.nextButton),g.attr("title",a.locale.prevButton),d.attr("title",a.locale.closeButton),h.attr("title",a.locale.downloadButton),c.find(".no-found-msg").text(a.locale.noImageFound),s.swipeDetector().on("swipeLeft.lsb swipeRight.lsb",function(t){m.images.length>1&&("swipeLeft"===t.type?k(m.nextImage()):"swipeRight"===t.type&&k(m.previousImage()))}),t(document).on("keyup.lightspeed-box",function(t){s.hasClass("lsb-active")&&(39===t.which&&m.images.length>1?(t.stopPropagation(),k(m.nextImage())):37===t.which&&m.images.length>1?(t.stopPropagation(),k(m.previousImage())):27===t.which&&y())}),u.click(function(t){t.stopPropagation(),a.autoPlayback=!1,k(m.nextImage())}),g.click(function(t){t.stopPropagation(),a.autoPlayback=!1,k(m.previousImage())}),f.click(function(t){t.stopPropagation(),a.autoPlayback=!a.autoPlayback,a.autoPlayback?(f.text("| |"),f.removeClass("lsb-autoplay"),f.addClass("lsb-autoplay-playing"),window.setTimeout(x,a.playbackTiming)):(f.text("►"),f.removeClass("lsb-autoplay-playing "),f.addClass("lsb-autoplay"))}),h.click(function(t){t.stopPropagation()}),c.click(p),o.click(p),s.click(function(){a.autoPlayback=!1,y()}),l.click(function(t){t.stopPropagation()})}(),t(".lsb-preview").click(function(e){e.preventDefault(),m.getImagesInSet(t(this)),w(),k(m.images[m.current]),a.autoPlayback&&window.setTimeout(x,a.playbackTiming)})},t.fn.swipeDetector=function(e){function c(t){(!e.useOnlyTouch||t.originalEvent.touches)&&(t.originalEvent.touches&&(t=t.originalEvent.touches[0]),0===i&&(i=1,a=t.clientX,s=t.clientY))}function u(){2===i&&(i=0,Math.abs(n)>Math.abs(o)&&Math.abs(n)>e.swipeThreshold?l.trigger(0>n?t.Event("swipeLeft.lsb"):t.Event("swipeRight.lsb")):Math.abs(o)>e.swipeThreshold&&l.trigger(0>o?t.Event("swipeUp.lsb"):t.Event("swipeDown.lsb")))}function g(t){if(1===i){t.originalEvent.touches&&(t=t.originalEvent.touches[0]);var l=t.clientX-a,r=t.clientY-s;(Math.abs(l)>e.swipeThreshold||Math.abs(r)>e.swipeThreshold)&&(i=2,n=l,o=r)}}var i=0,a=0,s=0,n=0,o=0,l=this,r={swipeThreshold:70,useOnlyTouch:!0};return function(){e=t.extend(r,e),l.on("mousedown touchstart",c),t("html").on("mouseup touchend",u),t("html").on("mousemove touchmove",g)}(),l}}(jQuery);