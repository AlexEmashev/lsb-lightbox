!function(t){"use strict";t.fn.lightspeedBox=function(i){function q(t){"undefined"!=typeof t&&(t.stopPropagation(),b(!1)),m.images.length>1?M(m.nextImage()):B()}function b(t){t?(s.slideshow=!0,f.hide(),w.show(),window.setTimeout(y,s.playbackTiming)):(s.slideshow=!1,f.show(),w.hide())}function x(){p=!1,h.text(""),l.addClass("lsb-active")}function B(){l.removeClass("lsb-active"),a.removeClass("lsb-image-loaded"),a.addClass("lsb-noimage"),p=!0}function y(){s.slideshow&&q(),s.slideshow&&!p&&window.setTimeout(y,s.playbackTiming)}function M(t){a.addClass("lsb-noimage"),a.removeClass("lsb-image-loaded"),n.addClass("lsb-image-notitle"),r.hide(),window.setTimeout(function(){I(t)},u)}function I(i){o.show(),h.text(s.showImageCount&&m.images.length>1?m.current+1+"/"+m.images.length:"");var e=t("<img />").attr("src",i.href).on("load",function(){a.attr("src",e.attr("src")),s.showImageTitle&&n.text(i.alt),c.attr("href",i.href),z()}).on("error",function(t){o.hide(),n.text(i.alt),r.show(),console.log("[LSB Error]:",t)})}function z(){o.hide(),a.removeClass("lsb-noimage"),a.addClass("lsb-image-loaded"),n.removeClass("lsb-image-notitle")}var l,o,a,n,h,r,g,v,d,c,f,w,e={showImageTitle:!0,showImageCount:!0,showDownloadButton:!0,showPlayButton:!0,slideshow:!1,playbackTiming:3500,zIndex:30,locale:{nextButton:"Next image",prevButton:"Previous image",closeButton:"Close",downloadButton:"Download image",noImageFound:"Sorry, no image found.",playButton:"Play slideshow",pauseButton:"Stop slideshow"}},s=t.extend(e,i),u=400,p=!0,m={current:null,images:[],getImagesInSet:function(i){var e,l=[],o=0,a=i.attr("href"),n=i.find("img").attr("alt"),h=i.attr("data-lsb-group");h?(e=t('.lsb-preview[data-lsb-group="'+h+'"]'),e.each(function(i,e){var s=e.getAttribute("href"),n=t(e).find("img").attr("alt");l.push({href:s,alt:n}),s===a&&(o=i)})):l.push({href:a,alt:n}),this.images=l,this.current=o,1===this.images.length?(v.css("visibility","hidden"),g.css("visibility","hidden"),f.hide()):(v.css("visibility","visible"),g.css("visibility","visible"),s.showPlayButton&&f.show())},nextImage:function(){return 0===this.images.length?"":(this.current+=1,this.current>this.images.length-1&&(this.current=0),this.images[this.current])},previousImage:function(){return 0===this.images.length?"":(this.current-=1,this.current<0&&(this.current=this.images.length-1),this.images[this.current])},canSwitch:function(){return this.images.length>1}};!function(){for(var i="",e=0;12>e;e++)i+='<div class="waitingicon-circle"></div>';t("body").append('<div class="lightspeed-box"><div class="lsb-content"><header class="lsb-header"><div class="lsb-image-count"></div><div class="lsb-image-title"></div></header><div class="lsb-control-panel"><a class="lsb-control lsb-panel-button lsb-play" title="Slideshow"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 1408 1792"><path fill="#000" d="M1384 927l-1328 738q-23 13-39.5 3t-16.5-36v-1472q0-26 16.5-36t39.5 3l1328 738q23 13 23 31t-23 31z" /></svg><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 1408 1792"><path fill="#fff" d="M1384 927l-1328 738q-23 13-39.5 3t-16.5-36v-1472q0-26 16.5-36t39.5 3l1328 738q23 13 23 31t-23 31z" /></svg></a><a class="lsb-control lsb-panel-button lsb-pause" title="Stop Slideshow"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 1536 1792"><path fill="#000" d="M1536 192v1408q0 26-19 45t-45 19h-512q-26 0-45-19t-19-45v-1408q0-26 19-45t45-19h512q26 0 45 19t19 45zM640 192v1408q0 26-19 45t-45 19h-512q-26 0-45-19t-19-45v-1408q0-26 19-45t45-19h512q26 0 45 19t19 45z" /></svg><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 1536 1792"><path fill="#fff" d="M1536 192v1408q0 26-19 45t-45 19h-512q-26 0-45-19t-19-45v-1408q0-26 19-45t45-19h512q26 0 45 19t19 45zM640 192v1408q0 26-19 45t-45 19h-512q-26 0-45-19t-19-45v-1408q0-26 19-45t45-19h512q26 0 45 19t19 45z" /></svg></a><a class="lsb-control lsb-panel-button lsb-download" download title="Download Image"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 1664 1792"><path fill="#000" d="M1280 1344q0-26-19-45t-45-19-45 19-19 45 19 45 45 19 45-19 19-45zM1536 1344q0-26-19-45t-45-19-45 19-19 45 19 45 45 19 45-19 19-45zM1664 1120v320q0 40-28 68t-68 28h-1472q-40 0-68-28t-28-68v-320q0-40 28-68t68-28h465l135 136q58 56 136 56t136-56l136-136h464q40 0 68 28t28 68zM1339 551q17 41-14 70l-448 448q-18 19-45 19t-45-19l-448-448q-31-29-14-70 17-39 59-39h256v-448q0-26 19-45t45-19h256q26 0 45 19t19 45v448h256q42 0 59 39z" /></svg><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 1664 1792"><path fill="#fff" d="M1280 1344q0-26-19-45t-45-19-45 19-19 45 19 45 45 19 45-19 19-45zM1536 1344q0-26-19-45t-45-19-45 19-19 45 19 45 45 19 45-19 19-45zM1664 1120v320q0 40-28 68t-68 28h-1472q-40 0-68-28t-28-68v-320q0-40 28-68t68-28h465l135 136q58 56 136 56t136-56l136-136h464q40 0 68 28t28 68zM1339 551q17 41-14 70l-448 448q-18 19-45 19t-45-19l-448-448q-31-29-14-70 17-39 59-39h256v-448q0-26 19-45t45-19h256q26 0 45 19t19 45v448h256q42 0 59 39z" /></svg></a></div><div class="lsb-image-container"><div class="lsb-no-image-found"><div class="no-found-msg">Sorry, no image found.</div></div><img class="lsb-image lsb-noimage"></div><div class="waitingicon">'+i+'</div><div class="lsb-control lsb-close"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 1408 1792"><path fill="#000" d="M1298 1322q0 40-28 68l-136 136q-28 28-68 28t-68-28l-294-294-294 294q-28 28-68 28t-68-28l-136-136q-28-28-28-68t28-68l294-294-294-294q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 294 294-294q28-28 68-28t68 28l136 136q28 28 28 68t-28 68l-294 294 294 294q28 28 28 68z" /></svg><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 1408 1792"><path fill="#fff" d="M1298 1322q0 40-28 68l-136 136q-28 28-68 28t-68-28l-294-294-294 294q-28 28-68 28t-68-28l-136-136q-28-28-28-68t28-68l294-294-294-294q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 294 294-294q28-28 68-28t68 28l136 136q28 28 28 68t-28 68l-294 294 294 294q28 28 28 68z" /></svg></div><div class="lsb-control lsb-prev" title="Previous Image"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 640 1792"><path fill="#000" d="M627 544q0 13-10 23l-393 393 393 393q10 10 10 23t-10 23l-50 50q-10 10-23 10t-23-10l-466-466q-10-10-10-23t10-23l466-466q10-10 23-10t23 10l50 50q10 10 10 23z" /></svg><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 640 1792"><path fill="#fff" d="M627 544q0 13-10 23l-393 393 393 393q10 10 10 23t-10 23l-50 50q-10 10-23 10t-23-10l-466-466q-10-10-10-23t10-23l466-466q10-10 23-10t23 10l50 50q10 10 10 23z" /></svg></div><div class="lsb-control lsb-next" title="Next Image"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 640 1792"><path fill="#000" d="M595 960q0 13-10 23l-466 466q-10 10-23 10t-23-10l-50-50q-10-10-10-23t10-23l393-393-393-393q-10-10-10-23t10-23l50-50q10-10 23-10t23 10l466 466q10 10 10 23z" /></svg><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 640 1792"><path fill="#fff" d="M595 960q0 13-10 23l-466 466q-10 10-23 10t-23-10l-50-50q-10-10-10-23t10-23l393-393-393-393q-10-10-10-23t10-23l50-50q10-10 23-10t23 10l466 466q10 10 10 23z" /></svg></div></div></div>'),l=t(".lightspeed-box"),l.css("z-index",s.zIndex),o=t(".waitingicon"),a=l.find(".lsb-image"),n=l.find(".lsb-image-title"),h=l.find(".lsb-image-count"),r=l.find(".lsb-no-image-found"),g=l.find(".lsb-next"),v=l.find(".lsb-prev"),d=l.find(".lsb-close"),c=l.find(".lsb-download"),f=l.find(".lsb-play"),w=l.find(".lsb-pause"),s.showDownloadButton||c.hide(),s.showPlayButton&&f.hide(),w.hide(),g.attr("title",s.locale.nextButton),v.attr("title",s.locale.prevButton),d.attr("title",s.locale.closeButton),c.attr("title",s.locale.downloadButton),f.attr("title",s.locale.playButton),w.attr("title",s.locale.pauseButton),r.find(".no-found-msg").text(s.locale.noImageFound),l.swipeDetector().on("swipeLeft.lsb swipeRight.lsb",function(t){m.images.length>1&&("swipeLeft"===t.type?M(m.nextImage()):"swipeRight"===t.type&&M(m.previousImage()))}),t(document).on("keyup.lightspeed-box",function(t){l.hasClass("lsb-active")&&(39===t.which&&m.images.length>1?(t.stopPropagation(),M(m.nextImage())):37===t.which&&m.images.length>1?(t.stopPropagation(),M(m.previousImage())):27===t.which&&B())}),g.click(function(t){t.stopPropagation(),s.slideshow=!1,M(m.nextImage())}),v.click(function(t){t.stopPropagation(),s.slideshow=!1,M(m.previousImage())}),f.click(function(t){t.stopPropagation(),b(!0)}),w.click(function(t){t.stopPropagation(),b(!1)}),c.click(function(t){t.stopPropagation()}),r.click(q),a.click(q),l.click(function(){b(!1),B()}),n.click(function(t){t.stopPropagation()})}(),t(".lsb-preview").click(function(i){i.preventDefault(),m.getImagesInSet(t(this)),x(),M(m.images[m.current]),s.slideshow&&window.setTimeout(y,s.playbackTiming)})},t.fn.swipeDetector=function(i){function r(t){(!i.useOnlyTouch||t.originalEvent.touches)&&(t.originalEvent.touches&&(t=t.originalEvent.touches[0]),0===e&&(e=1,s=t.clientX,l=t.clientY))}function g(){2===e&&(e=0,Math.abs(o)>Math.abs(a)&&Math.abs(o)>i.swipeThreshold?n.trigger(0>o?t.Event("swipeLeft.lsb"):t.Event("swipeRight.lsb")):Math.abs(a)>i.swipeThreshold&&n.trigger(0>a?t.Event("swipeUp.lsb"):t.Event("swipeDown.lsb")))}function v(t){if(1===e){t.originalEvent.touches&&(t=t.originalEvent.touches[0]);var n=t.clientX-s,h=t.clientY-l;(Math.abs(n)>i.swipeThreshold||Math.abs(h)>i.swipeThreshold)&&(e=2,o=n,a=h)}}var e=0,s=0,l=0,o=0,a=0,n=this,h={swipeThreshold:70,useOnlyTouch:!0};return function(){i=t.extend(h,i),n.on("mousedown touchstart",r),t("html").on("mouseup touchend",g),t("html").on("mousemove touchmove",v)}(),n}}(jQuery);